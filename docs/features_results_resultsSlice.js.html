<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: features/results/resultsSlice.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: features/results/resultsSlice.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { createSlice } from "@reduxjs/toolkit"
import { v4 as uuidv4 } from "uuid";
/**
 * Redux slice responsible for storing and managing
 * user game statistics.
 *
 * The slice persists results in localStorage using
 * a unique user identifier (UUID).
 *
 * Stored statistics include:
 * - total correct answers
 * - last game correct answers
 * - total games played
 * - total tasks answered
 *
 * @module features/results/resultsSlice
 */
/**
 * Retrieves or generates a persistent user UUID.
 *
 * If a UUID does not exist in localStorage,
 * a new one is generated and saved.
 *
 * @function getUserId
 * @returns {string|null} Unique user identifier or null if localStorage fails.
 */
function getUserId() {
    try {
        let id = localStorage.getItem("uuid");
        if (!id) {
            id = uuidv4();
            localStorage.setItem("uuid", id);
        }

        return id;
    }
    catch (e) {
        console.error("Error accessing localStorage:", e);
        return null;
    }
}

const userId = getUserId();

const savedResults = localStorage.getItem(`${userId}_gameSave`);
/**
 * Initial Redux state for results slice.
 *
 * Loaded from localStorage if available.
 *
 * @type {Object}
 * @property {number} correctAnswers
 * @property {number} lastGameCorrectAnswers
 * @property {number} totalGames
 * @property {number} totalTasks
 */
const initialState = savedResults
    ? JSON.parse(savedResults)
    : {
        correctAnswers: 0,
        lastGameCorrectAnswers: 0,
        totalGames: 0,
        totalTasks: 0
    };

const resultsSlice = createSlice({
    name: "results",
    initialState,
    reducers: {
        /**
         * Increments total correct answers.
         * @param {Object} state
         * @param {Object} action
         * @param {number} action.payload - Number of correct answers to add.
         */
        incrementCorrectAnswersRTK: (state, action) => {
            state.correctAnswers += action.payload;
        },

        /**
         * Sets correct answers count for the last completed game.
         * @param {Object} state
         * @param {Object} action
         * @param {number} action.payload
         */
        setLastGameCorrectAnswersRTK: (state, action) => {
            state.lastGameCorrectAnswers = action.payload;
        },

        /**
         * Increments total number of played games.
         */
        incrementTotalGamesRTK: (state) => {
            state.totalGames += 1;
        },

        /**
         * Increments total number of answered tasks.
         * @param {Object} state
         * @param {Object} action
         * @param {number} action.payload
         */
        incrementTotalTasksRTK: (state, action) => {
            state.totalTasks += action.payload;
        }
    }
})

export const { incrementCorrectAnswersRTK, setLastGameCorrectAnswersRTK, incrementTotalGamesRTK, incrementTotalTasksRTK } = resultsSlice.actions;
export default resultsSlice.reducer;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-features_results_resultsSlice.html">features/results/resultsSlice</a></li><li><a href="module-features_settings_settingsSlice.html">features/settings/settingsSlice</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getUuid">getUuid</a></li><li><a href="global.html#saveGameResults">saveGameResults</a></li><li><a href="global.html#useEngineExercise">useEngineExercise</a></li><li><a href="global.html#useTimer">useTimer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Feb 27 2026 22:12:02 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
